<?xml version="1.0" encoding="utf-8" ?>
<Patch>
	<Operation Class="PatchOperationFindMod">
		<success>Always</success>
		<mods>
			<li>Prosthetic Combat Framework</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>

				<!--ADDING HEDIFF-->
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<!--EVOR_Bullet_Maggot-->
						<HediffDef ParentName="AddedBodyPartBase">
							<defName>EVOR_Hediff_Primary_MaggotBolter</defName>
							<label>voracious maggot bolter</label>
							<defaultLabelColor>(.2,1,.9)</defaultLabelColor>
							<labelNoun>a voracious maggot bolter</labelNoun>
							<spawnThingOnRemoved>EVOR_Item_MaggotBolter</spawnThingOnRemoved>
							<addedPartProps>
								<solid>true</solid>     
								<partEfficiency>1.0</partEfficiency>
								<betterThanNatural>true</betterThanNatural>
							</addedPartProps>
							<comps>
								<li Class="OrenoPCF.HediffCompProperties_VerbGiverExtended">
									<toggleLabel>Voracious Maggot Bolter</toggleLabel>
									<toggleDescription>Voracious Maggot Bolter.</toggleDescription>
									<toggleBackgroundPath>UI/Widgets/Prosthetic/DesButBGBB</toggleBackgroundPath>
									<toggleIconPath>UI/Widgets/Organs/EVOR_Texture_Minigun</toggleIconPath>
									<toggleIconAngle>-45.0</toggleIconAngle>
									<verbs>
										<li>
											<label>voracious maggot bolter</label>
											<verbClass>Verb_Shoot</verbClass>
											<accuracyTouch>0.33</accuracyTouch>
											<accuracyShort>0.30</accuracyShort>
											<accuracyMedium>0.27</accuracyMedium>
											<accuracyLong>0.24</accuracyLong>
											<hasStandardCommand>true</hasStandardCommand>
											<defaultProjectile>EVOR_Bullet_Maggot</defaultProjectile>
											<warmupTime>2.30</warmupTime>
											<range>20.0</range>
											<ticksBetweenBurstShots>3</ticksBetweenBurstShots>
											<burstShotCount>12</burstShotCount>
											<soundCast>Pawn_Spelopede_Angry</soundCast>
											<soundCastTail>GunTail_Medium</soundCastTail>
											<muzzleFlashScale>6</muzzleFlashScale>
										</li>
									</verbs>
									<verbsProperties>
										<li>
											<label>voracious maggot bolter</label>
											<description>Voracious Maggot Bolter</description>
											<uiIconPath>UI/Icon/EVOR_Texture_RedBullets</uiIconPath>
										</li>
									</verbsProperties>
								</li>
							</comps>
							<stages>
								<li>
									<capMods>
										<li>
											<capacity>Manipulation</capacity>
											<offset>-0.2</offset>
										</li>
									</capMods>
									<statOffsets>
										<RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
									</statOffsets>
								</li>	
							</stages>
						</HediffDef>

						<HediffDef ParentName="AddedBodyPartBase">
							<defName>EVOR_Hediff_Primary_Razortick</defName>
							<label>burrowing razortick cannon</label>
							<defaultLabelColor>(.2,1,.9)</defaultLabelColor>
							<labelNoun>a burrowing razortick cannon</labelNoun>
							<spawnThingOnRemoved>EVOR_Item_Razortick</spawnThingOnRemoved>
							<addedPartProps>
								<solid>true</solid>     
								<partEfficiency>1.0</partEfficiency>
								<betterThanNatural>true</betterThanNatural>
							</addedPartProps>
							<comps>
								<li Class="OrenoPCF.HediffCompProperties_VerbGiverExtended">
									<toggleLabel>Burrowing Razortick Cannon</toggleLabel>
									<toggleDescription>Burrowing Razortick Cannon.</toggleDescription>
									<toggleBackgroundPath>UI/Widgets/Prosthetic/DesButBGBB</toggleBackgroundPath>
									<toggleIconPath>UI/Widgets/Organs/EVOR_Texture_Cannon</toggleIconPath>
									<toggleIconAngle>-45.0</toggleIconAngle>
									<verbs>
										<li>
											<label>burrowing razortick cannon</label>
											<verbClass>Verb_Shoot</verbClass>
											<accuracyTouch>0.50</accuracyTouch>
											<accuracyShort>0.70</accuracyShort>
											<accuracyMedium>0.86</accuracyMedium>
											<accuracyLong>0.90</accuracyLong>
											<hasStandardCommand>true</hasStandardCommand>
											<defaultProjectile>EVOR_Bullet_Razortick</defaultProjectile>
											<warmupTime>3.00</warmupTime>
											<range>45.0</range>
											<soundCast>Pawn_Megascarab_Angry</soundCast>
											<soundCastTail>GunTail_Medium</soundCastTail>
											<muzzleFlashScale>6</muzzleFlashScale>
										</li>
									</verbs>
									<verbsProperties>
										<li>
											<label>burrowing razortick cannon</label>
											<description>Burrowing Razortick Cannon</description>
											<uiIconPath>Things/Projectile/EVOR_Texture_Tick</uiIconPath>
										</li>
									</verbsProperties>
								</li>
							</comps>
							<stages>
								<li>
									<capMods>
										<li>
											<capacity>Manipulation</capacity>
											<offset>-0.2</offset>
										</li>
									</capMods>
									<statOffsets>
										<RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
									</statOffsets>
								</li>	
							</stages>
						</HediffDef>


						<!--EVOR_Bullet_Maggot-->
						<HediffDef ParentName="AddedBodyPartBase">
							<defName>EVOR_Hediff_Secondary_MaggotBolter</defName>
							<label>voracious maggot bolter</label>
							<defaultLabelColor>(.2,1,.9)</defaultLabelColor>
							<labelNoun>a voracious maggot bolter</labelNoun>
							<spawnThingOnRemoved>EVOR_Item_MaggotBolter</spawnThingOnRemoved>
							<addedPartProps>
								<solid>true</solid>     
								<partEfficiency>1.0</partEfficiency>
								<betterThanNatural>true</betterThanNatural>
							</addedPartProps>
							<comps>
								<li Class="OrenoPCF.HediffCompProperties_VerbGiverExtended">
									<toggleLabel>Voracious Maggot Bolter</toggleLabel>
									<toggleDescription>Voracious Maggot Bolter.</toggleDescription>
									<toggleBackgroundPath>UI/Widgets/Prosthetic/DesButBGBB</toggleBackgroundPath>
									<toggleIconPath>UI/Widgets/Organs/EVOR_Texture_Minigun</toggleIconPath>
									<toggleIconAngle>-45.0</toggleIconAngle>
									<verbs>
										<li>
											<label>voracious maggot bolter</label>
											<verbClass>Verb_Shoot</verbClass>
											<accuracyTouch>0.33</accuracyTouch>
											<accuracyShort>0.30</accuracyShort>
											<accuracyMedium>0.27</accuracyMedium>
											<accuracyLong>0.24</accuracyLong>
											<hasStandardCommand>true</hasStandardCommand>
											<defaultProjectile>EVOR_Bullet_Maggot</defaultProjectile>
											<warmupTime>2.30</warmupTime>
											<range>20.0</range>
											<ticksBetweenBurstShots>3</ticksBetweenBurstShots>
											<burstShotCount>12</burstShotCount>
											<soundCast>Pawn_Spelopede_Angry</soundCast>
											<soundCastTail>GunTail_Medium</soundCastTail>
											<muzzleFlashScale>6</muzzleFlashScale>
										</li>
									</verbs>
									<verbsProperties>
										<li>
											<label>voracious maggot bolter</label>
											<description>Voracious Maggot Bolter</description>
											<uiIconPath>UI/Icon/EVOR_Texture_RedBullets</uiIconPath>
										</li>
									</verbsProperties>
								</li>
							</comps>
							<stages>
								<li>
									<capMods>
										<li>
											<capacity>Manipulation</capacity>
											<offset>0.3</offset>
										</li>
									</capMods>
									<statOffsets>
										<RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
									</statOffsets>
								</li>	
							</stages>
						</HediffDef>

						<HediffDef ParentName="AddedBodyPartBase">
							<defName>EVOR_Hediff_Secondary_Razortick</defName>
							<label>burrowing razortick cannon</label>
							<defaultLabelColor>(.2,1,.9)</defaultLabelColor>
							<labelNoun>a burrowing razortick cannon</labelNoun>
							<spawnThingOnRemoved>EVOR_Item_Razortick</spawnThingOnRemoved>
							<addedPartProps>
								<solid>true</solid>     
								<partEfficiency>1.0</partEfficiency>
								<betterThanNatural>true</betterThanNatural>
							</addedPartProps>
							<comps>
								<li Class="OrenoPCF.HediffCompProperties_VerbGiverExtended">
									<toggleLabel>Burrowing Razortick Cannon</toggleLabel>
									<toggleDescription>Burrowing Razortick Cannon.</toggleDescription>
									<toggleBackgroundPath>UI/Widgets/Prosthetic/DesButBGBB</toggleBackgroundPath>
									<toggleIconPath>UI/Widgets/Organs/EVOR_Texture_Cannon</toggleIconPath>
									<toggleIconAngle>-45.0</toggleIconAngle>
									<verbs>
										<li>
											<label>burrowing razortick cannon</label>
											<verbClass>Verb_Shoot</verbClass>
											<accuracyTouch>0.50</accuracyTouch>
											<accuracyShort>0.70</accuracyShort>
											<accuracyMedium>0.86</accuracyMedium>
											<accuracyLong>0.90</accuracyLong>
											<hasStandardCommand>true</hasStandardCommand>
											<defaultProjectile>EVOR_Bullet_Razortick</defaultProjectile>
											<warmupTime>3.00</warmupTime>
											<range>45.0</range>
											<soundCast>Pawn_Megascarab_Angry</soundCast>
											<soundCastTail>GunTail_Medium</soundCastTail>
											<muzzleFlashScale>6</muzzleFlashScale>
										</li>
									</verbs>
									<verbsProperties>
										<li>
											<label>burrowing razortick cannon</label>
											<description>Burrowing Razortick Cannon</description>
											<uiIconPath>UI/Icon/EVOR_Texture_RedShell</uiIconPath>
										</li>
									</verbsProperties>
								</li>
							</comps>
							<stages>
								<li>
									<capMods>
										<li>
											<capacity>Manipulation</capacity>
											<offset>0.3</offset>
										</li>
									</capMods>
									<statOffsets>
										<RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
									</statOffsets>
								</li>	
							</stages>
						</HediffDef>

					</value>
					<success>Always</success>
				</li>

				<!--ADDING ITEM-->
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<ThingDef ParentName="EVOR_OrgBase">
							<defName>EVOR_Item_MaggotBolter</defName>
							<label>voracious maggot bolter</label>
							<description>By creating a rapidly growing strain of maggots and adapting them to life in our bodies, we can use them as bullet-like ammunition in our bio-weapons.</description>
							<recipeMaker>
								<researchPrerequisite>EVOR_Research_Limbs4</researchPrerequisite>
							</recipeMaker>
							<costList>
								<EVOR_Resource_Protein>140</EVOR_Resource_Protein>
								<EVOR_Resource_Mechanites>3</EVOR_Resource_Mechanites>
							</costList>
						</ThingDef>

						<ThingDef ParentName="EVOR_OrgBase">
							<defName>EVOR_Item_Razortick</defName>
							<label>burrowing razortick cannon</label>
							<description>The ticks shot by this cannon have a smattering of explosive juices on the tip, followed up by a hard shell. After punching though the intial armor with the explosion, the tick burrows rapidly into the target before dying in a flurry of cuts.</description>
							<recipeMaker>
								<researchPrerequisite>EVOR_Research_Limbs4</researchPrerequisite>
							</recipeMaker>
							<costList>
								<EVOR_Resource_Protein>140</EVOR_Resource_Protein>
								<EVOR_Resource_Mechanites>3</EVOR_Resource_Mechanites>
							</costList>
						</ThingDef>
					</value>
					<success>Always</success>
				</li>

				<!--Adding Surgeries-->
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<!--Maggot Bolter-->
						<RecipeDef ParentName="SurgeryFlesh">
							<defName>EVOR_Surgery_Primary_MaggotBolter</defName>
							<label>&lt;color=#00FFF7&gt;implant voracious maggot bolter&lt;/color&gt;</label>
							<description>Implant a voracious maggot bolter.</description>
							<workerClass>Recipe_InstallArtificialBodyPart</workerClass>
							<jobString>Implanting voracious maggot bolter.</jobString>
							<workAmount>3000</workAmount>
							<skillRequirements>
								<Medicine>10</Medicine>
							</skillRequirements>
							<recipeUsers>
								<li>Human</li>
							</recipeUsers>
							<ingredients>
								<li>
									<filter>
										<categories>
											<li>Medicine</li>
										</categories>
									</filter>
									<count>2</count>
								</li>
								<li>
									<filter>
										<thingDefs>
											<li>EVOR_Item_MaggotBolter</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<categories>
									<li>Medicine</li>
								</categories>
								<thingDefs>
									<li>EVOR_Item_MaggotBolter</li>
								</thingDefs>
							</fixedIngredientFilter>
							<appliedOnFixedBodyParts>
								<li>Shoulder</li>
							</appliedOnFixedBodyParts>
							<addsHediff>EVOR_Hediff_Primary_MaggotBolter</addsHediff>
						</RecipeDef>

						<!--Razortick-->
						<RecipeDef ParentName="SurgeryFlesh">
							<defName>EVOR_Surgery_Primary_Razortick</defName>
							<label>&lt;color=#00FFF7&gt;implant burrowing razortick cannon&lt;/color&gt;</label>
							<description>Implant a burrowing razortick cannon.</description>
							<workerClass>Recipe_InstallArtificialBodyPart</workerClass>
							<jobString>Implanting burrowing razortick cannon.</jobString>
							<workAmount>3000</workAmount>
							<skillRequirements>
								<Medicine>10</Medicine>
							</skillRequirements>
							<recipeUsers>
								<li>Human</li>
							</recipeUsers>
							<ingredients>
								<li>
									<filter>
										<categories>
											<li>Medicine</li>
										</categories>
									</filter>
									<count>2</count>
								</li>
								<li>
									<filter>
										<thingDefs>
											<li>EVOR_Item_Razortick</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<categories>
									<li>Medicine</li>
								</categories>
								<thingDefs>
									<li>EVOR_Item_Razortick</li>
								</thingDefs>
							</fixedIngredientFilter>
							<appliedOnFixedBodyParts>
								<li>Shoulder</li>
							</appliedOnFixedBodyParts>
							<addsHediff>EVOR_Hediff_Primary_Razortick</addsHediff>
						</RecipeDef>

						<!--Maggot Bolter-->
						<RecipeDef ParentName="SurgeryFlesh">
							<defName>EVOR_Surgery_Secondary_MaggotBolter</defName>
							<label>&lt;color=#00FFF7&gt;implant voracious maggot bolter&lt;/color&gt;</label>
							<description>Implant a voracious maggot bolter.</description>
							<workerClass>Recipe_InstallArtificialBodyPart</workerClass>
							<jobString>Implanting voracious maggot bolter.</jobString>
							<workAmount>3000</workAmount>
							<skillRequirements>
								<Medicine>10</Medicine>
							</skillRequirements>
							<recipeUsers>
								<li>Human</li>
							</recipeUsers>
							<ingredients>
								<li>
									<filter>
										<categories>
											<li>Medicine</li>
										</categories>
									</filter>
									<count>2</count>
								</li>
								<li>
									<filter>
										<thingDefs>
											<li>EVOR_Item_MaggotBolter</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<categories>
									<li>Medicine</li>
								</categories>
								<thingDefs>
									<li>EVOR_Item_MaggotBolter</li>
								</thingDefs>
							</fixedIngredientFilter>
							<appliedOnFixedBodyParts>
								<li>LowerShoulder</li>
							</appliedOnFixedBodyParts>
							<addsHediff>EVOR_Hediff_Secondary_MaggotBolter</addsHediff>
							<researchPrerequisite>EVOR_Research_Limbs3</researchPrerequisite>
						</RecipeDef>

						<!--Razortick-->
						<RecipeDef ParentName="SurgeryFlesh">
							<defName>EVOR_Surgery_Secondary_Razortick</defName>
							<label>&lt;color=#00FFF7&gt;implant burrowing razortick cannon&lt;/color&gt;</label>
							<description>Implant a burrowing razortick cannon.</description>
							<workerClass>Recipe_InstallArtificialBodyPart</workerClass>
							<jobString>Implanting burrowing razortick cannon.</jobString>
							<workAmount>3000</workAmount>
							<skillRequirements>
								<Medicine>10</Medicine>
							</skillRequirements>
							<recipeUsers>
								<li>Human</li>
							</recipeUsers>
							<ingredients>
								<li>
									<filter>
										<categories>
											<li>Medicine</li>
										</categories>
									</filter>
									<count>2</count>
								</li>
								<li>
									<filter>
										<thingDefs>
											<li>EVOR_Item_Razortick</li>
										</thingDefs>
									</filter>
									<count>1</count>
								</li>
							</ingredients>
							<fixedIngredientFilter>
								<categories>
									<li>Medicine</li>
								</categories>
								<thingDefs>
									<li>EVOR_Item_Razortick</li>
								</thingDefs>
							</fixedIngredientFilter>
							<appliedOnFixedBodyParts>
								<li>LowerShoulder</li>
							</appliedOnFixedBodyParts>
							<addsHediff>EVOR_Hediff_Secondary_Razortick</addsHediff>
							<researchPrerequisite>EVOR_Research_Limbs3</researchPrerequisite>
						</RecipeDef>

					</value>
					<success>Always</success>
				</li>

				<!--ADDING PROJECTILES-->
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<ThingDef ParentName="BaseBullet">
							<defName>EVOR_Bullet_Maggot</defName>
							<label>voracious maggot</label>
							<graphicData>
								<texPath>Things/Projectile/EVOR_Texture_Maggot</texPath>
								<graphicClass>Graphic_Single</graphicClass>
							</graphicData>
							<projectile>
								<damageDef>Bullet</damageDef>
								<damageAmountBase>8</damageAmountBase>
								<stoppingPower>1</stoppingPower>
								<speed>46</speed>
							</projectile>
						</ThingDef>

						<ThingDef ParentName="BaseBullet">
							<defName>EVOR_Bullet_Razortick</defName>
							<label>razortick</label>
							<graphicData>
								<texPath>Things/Projectile/EVOR_Texture_Tick</texPath>
								<graphicClass>Graphic_Single</graphicClass>
							</graphicData>
							<projectile>
								<damageDef>Bullet</damageDef>
								<damageAmountBase>30</damageAmountBase>
								<stoppingPower>4</stoppingPower>
								<armorPenetrationBase>0.45</armorPenetrationBase>
								<speed>65</speed>
							</projectile>
						</ThingDef>
					</value>
					<success>Always</success>
				</li>

				<li Class="PatchOperationFindMod">
					<mods>
						<li>Elite Bionics Framework</li>
					</mods>
					<match Class="PatchOperationSequence">
						<operations>

							<li Class="PatchOperationAdd">
								<xpath>/Defs/HediffDef[defName="EVOR_Hediff_Primary_MaggotBolter"]/comps</xpath>
								<value>
									<li Class="EBF.Hediffs.HediffCompProperties_MaxHPAdjust">
										<linearAdjustment>15</linearAdjustment>
									</li>
								</value>
								<success>Always</success>
							</li>
							<li Class="PatchOperationAdd">
								<xpath>/Defs/HediffDef[defName="EVOR_Hediff_Secondary_MaggotBolter"]/comps</xpath>
								<value>
									<li Class="EBF.Hediffs.HediffCompProperties_MaxHPAdjust">
										<linearAdjustment>15</linearAdjustment>
									</li>
								</value>
								<success>Always</success>
							</li>
							<li Class="PatchOperationAdd">
								<xpath>/Defs/HediffDef[defName="EVOR_Hediff_Primary_Razortick"]/comps</xpath>
								<value>
									<li Class="EBF.Hediffs.HediffCompProperties_MaxHPAdjust">
										<linearAdjustment>15</linearAdjustment>
									</li>
								</value>
								<success>Always</success>
							</li>
							<li Class="PatchOperationAdd">
								<xpath>/Defs/HediffDef[defName="EVOR_Hediff_Secondary_Razortick"]/comps</xpath>
								<value>
									<li Class="EBF.Hediffs.HediffCompProperties_MaxHPAdjust">
										<linearAdjustment>15</linearAdjustment>
									</li>
								</value>
								<success>Always</success>
							</li>

						</operations>
					</match>
				</li>

				<li Class="PatchOperationFindMod">
					<mods>
						<li>Questionable Ethics Enhanced</li>
					</mods>
					<match Class="PatchOperationSequence">
						<operations>
							<li Class="PatchOperationRemove">
								<xpath>/Defs/ThingDef[defName="EVOR_Item_MaggotBolter"]/recipeMaker</xpath>
							</li>
							<li Class="PatchOperationRemove">
								<xpath>/Defs/ThingDef[defName="EVOR_Item_MaggotBolter"]/costList</xpath>
							</li>
							<li Class="PatchOperationRemove">
								<xpath>/Defs/ThingDef[defName="EVOR_Item_Razortick"]/recipeMaker</xpath>
							</li>
							<li Class="PatchOperationRemove">
								<xpath>/Defs/ThingDef[defName="EVOR_Item_Razortick"]/costList</xpath>
							</li>
							<li Class="PatchOperationAdd">
								<xpath>/Defs</xpath>
								<value>
									<RecipeDef ParentName="EVOR_Grower_Recipe_LimbMech">
										<defName>EVOR_QEE_MaggotBolter</defName>
										<label>&lt;color=#00FFF7&gt;voracious maggot bolter&lt;/color&gt;</label>
										<products>
											<EVOR_Item_MaggotBolter>1</EVOR_Item_MaggotBolter>
										</products>
										<researchPrerequisite>EVOR_Research_Limbs4</researchPrerequisite>
									</RecipeDef>

									<RecipeDef ParentName="EVOR_Grower_Recipe_LimbMech">
										<defName>EVOR_QEE_Razortick</defName>
										<label>&lt;color=#00FFF7&gt;burrowing razortick cannon&lt;/color&gt;</label>
										<products>
											<EVOR_Item_Razortick>1</EVOR_Item_Razortick>
										</products>
										<researchPrerequisite>EVOR_Research_Limbs4</researchPrerequisite>
									</RecipeDef>
								</value>
							</li>
						</operations>
					</match>
				</li>
			</operations>
		</match>
	</Operation>

</Patch>




